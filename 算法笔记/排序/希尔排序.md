# 希尔排序

> 希尔排序是对插入排序的改进，依靠的性质是插入排序对部分有序的数组很有效
>
> 即插入排序需要的交换操作和数组中倒置的数量相同，需要的比较次数大于等于倒置的数量，小于等于倒置的数量加上数组的大小再减一
>
> 希尔排序的目的是使得数组部分有序，准确来说，希尔排序的思想是使数组中任意间隔为 h 的元素都是有序的。

![image-20200824192157592](C:\Users\k\AppData\Roaming\Typora\typora-user-images\image-20200824192157592.png)

因为子数组是相互独立的，对于每一个 h 子数组，将每一个元素交换到比它大的元素之前去。也就是说只要把插入排序移动的距离由 1 改变成 h 即可。==希尔排序的实现转化为了一个类似于插入排序但使用不同增量的过程。==

**希尔排序更高效的原因是它权衡了子数组的规模和有序性。排序之初，每一个子数组都很短，排序后的子数组都是部分有序的。**这两种情况都很适合于插入排序

## 算法代码

```java
public class Shell
{
    public static void sort(Comparable[] a)
    {
        int N = a.length;
        int h = 1;
        while(h < N/3)
        {
            h = h * 3 + 1;
        }
        while(h >= 1)
        {
            for(int i = 1; i < N; i++)
            {
                for(int j = i; j >= h && less(a[j], a[j-h]); j -= h)
                {
                    exch(a, j, j-h);
                }
            }
            h = h/3;
        }
    }
}
```

